# ur5e_custom.yml - UR5e用cuRobo設定テンプレート
#
# このファイルをカスタマイズしてUR5eの動作パラメータを調整できます。
# 使用方法: ./scripts/run-ur5-motion.sh ur5e_custom.yml
#
# 参考: https://curobo.org/tutorials/1_robot_configuration.html

robot_cfg:
  kinematics:
    # URDFファイルパス（cuRobo内蔵のものを使用）
    urdf_path: "robot/ur_description/ur5e.urdf"
    asset_root_path: "robot/ur_description"
    
    # USDファイルパス（Isaac Sim用）
    usd_path: "robot/ur_description/ur5e.usd"
    usd_robot_root: "/robot"
    
    # Isaac Simアセットパス（オプション）
    isaac_usd_path: "/Isaac/Robots/UniversalRobots/ur5e/ur5e.usd"
    
    # リンク設定
    base_link: "base_link"
    ee_link: "tool0"
    
    # 衝突チェック対象リンク
    collision_link_names:
      - "shoulder_link"
      - "upper_arm_link"
      - "forearm_link"
      - "wrist_1_link"
      - "wrist_2_link"
      - "wrist_3_link"
    
    # 自己衝突を無視するリンクペア
    self_collision_ignore:
      shoulder_link: ["base_link"]
      upper_arm_link: ["shoulder_link"]
      forearm_link: ["upper_arm_link"]
      wrist_1_link: ["forearm_link"]
      wrist_2_link: ["wrist_1_link"]
      wrist_3_link: ["wrist_2_link"]
    
    # 衝突球のバッファ（メートル）
    collision_sphere_buffer: 0.005
  
  cspace:
    # 関節名（URDFと一致させる）
    joint_names:
      - "shoulder_pan_joint"
      - "shoulder_lift_joint"
      - "elbow_joint"
      - "wrist_1_joint"
      - "wrist_2_joint"
      - "wrist_3_joint"
    
    # 初期（退避）姿勢 [rad]
    # この姿勢はモーション生成の開始点やヌルスペース目標として使用
    retract_config: [-1.57, -2.2, 1.9, -1.383, -1.57, 0.0]
    
    # ヌルスペースの重み（冗長自由度がある場合に使用）
    null_space_weight: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
    
    # 構成空間距離の重み
    cspace_distance_weight: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
    
    # ===== 動作制限（カスタマイズ可能） =====
    # 最大ジャーク [rad/s^3]
    max_jerk: 500.0
    
    # 最大加速度 [rad/s^2]
    max_acceleration: 15.0

# ===== 衝突球の設定（オプション） =====
# Isaac Simの Lula Robot Description Editor で生成可能
# 以下は例として shoulder_link と upper_arm_link のみ記載

collision_spheres:
  shoulder_link:
    - center: [0.0, 0.0, 0.0]
      radius: 0.08
  
  upper_arm_link:
    - center: [-0.2, 0.0, 0.13]
      radius: 0.06
    - center: [-0.35, 0.0, 0.13]
      radius: 0.06
    - center: [0.0, 0.0, 0.13]
      radius: 0.07
  
  forearm_link:
    - center: [-0.15, 0.0, 0.02]
      radius: 0.05
    - center: [-0.3, 0.0, 0.02]
      radius: 0.05
  
  wrist_1_link:
    - center: [0.0, 0.0, 0.0]
      radius: 0.045
  
  wrist_2_link:
    - center: [0.0, 0.0, 0.0]
      radius: 0.045
  
  wrist_3_link:
    - center: [0.0, 0.0, 0.0]
      radius: 0.04

# ===== 追加設定（上級者向け） =====

# ワールド衝突設定（オプション）
# world_cfg:
#   cuboid:
#     table:
#       dims: [1.0, 1.0, 0.05]
#       pose: [0.5, 0.0, -0.025, 1, 0, 0, 0]  # [x, y, z, qw, qx, qy, qz]
#   mesh:
#     obstacle:
#       file_path: "path/to/mesh.obj"
#       pose: [0.0, 0.0, 0.0, 1, 0, 0, 0]
